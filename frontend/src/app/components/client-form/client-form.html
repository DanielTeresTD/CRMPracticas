<form [formGroup]="clientForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">

    @for (key of fieldKeys; track key) {
    <div class="flex flex-col">
        <label class="text-sm font-semibold capitalize mb-1">{{ key }}</label>
        <input [formControlName]="key" class="border p-2 rounded" [readonly]="key === 'id' ? true : mode === 'view'"
            [type]="getFieldType(key)" />
    </div>
    }

    @if (clientPhones && clientPhones.length > 0 && mode === 'view') {
    <div class="flex flex-col">
        <label class="text-sm font-semibold capitalize mb-1">Teléfonos</label>
        <ul class="list-disc list-inside pl-4">
            @for (phone of clientPhones; track phone) {
            <li>{{ phone }}</li>
            }
        </ul>
    </div>
    }

    @if (mode !== 'view') {
    <div class="flex flex-col">
        <label class="text-sm font-semibold capitalize mb-1">Teléfonos</label>

        @for (phone of phoneNums.controls; track $index) {
        <div class="flex items-center gap-2 mb-2">
            <input type="text" [formControl]="getPhoneControl($index)" class="border p-2 rounded w-full" />
            <button type="button" (click)="removePhone($index)" class="text-red-600 text-sm">
                Eliminar
            </button>
        </div>
        }



        <button type="button" (click)="addPhone()" class="text-blue-600 text-sm mt-1">+ Añadir teléfono</button>
    </div>

    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded mt-4">
        {{ mode === 'edit' ? 'Guardar cambios' : 'Agregar cliente' }}
    </button>
    }

</form>