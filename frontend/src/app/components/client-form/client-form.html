@if (mode === 'view' && client) {
<div class="flex flex-col gap-4">

    <div class="input-group">
        <label for="name">Name</label>
        <input id="name" pInputText [readonly]="true" [value]="client.name" />
    </div>

    <div class="input-group">
        <label for="email">Email</label>
        <input id="email" pInputText [readonly]="true" [value]="client.email" />
    </div>

    <div class="input-group">
        <label for="address">Address</label>
        <input id="address" pInputText [readonly]="true" [value]="client.address" />
    </div>

    <div class="input-group">
        <label for="dni">DNI</label>
        <input id="dni" pInputText [readonly]="true" [value]="client.dni" />
    </div>

    @if (clientPhones && clientPhones.length > 0) { <div class="flex flex-col input-group"> <label>Phones:</label>
        <ul class="list-disc list-inside pl-4"> @for (phone of clientPhones; track phone) { <li>{{ phone.phoneNumber }}
            </li> } </ul>
    </div> }

</div>
}



@if (mode !== 'view') {
<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">

    <!-- Campos usuario -->
    <div class="input-group">
        <label for="userName">User name</label>
        <input id="userName" formControlName="userName" type="text" pInputText />
    </div>

    <div class="input-group">
        <label for="password">Password</label>
        <input id="password" formControlName="password" type="password" pInputText />
    </div>

    <div class="input-group">
        <label for="dni">DNI</label>
        @if (mode === 'edit') {
        <input id="dni" formControlName="dni" type="text" pInputText readonly />
        } @else {
        <input id="dni" formControlName="dni" type="text" pInputText />
        }
    </div>

    <div class="input-group">
        <label for="role">Rol</label>
        <p-select [options]="roles" formControlName="role" inputId="role" placeholder="Select role" appendTo="body"
            optionValue="value" optionLabel="label">
        </p-select>
    </div>

    @if (userForm.get('role')?.value !== 2 && mode !== 'edit') {
    <button pButton type="submit" class="p-button-guardar">
        {{ mode === 'add' ? 'Add user' : 'Save changes' }}
    </button>
    }

    @if (clientForm) {
    <div [formGroup]="clientForm" class="flex flex-col gap-4">

        @for (key of fieldKeysClient; track key) {
        <div class="input-group">
            @if (key !== "phoneNums") {
            <label for="{{ key }}">{{ key | titlecase }}</label>
            <input id="{{ key }}" [formControlName]="key" [type]="getFieldType(key)" pInputText />
            }
        </div>
        }

        <div class="form-section">
            <label style="font-weight: bold;">Phones:</label>

            @for (phoneGroup of phoneNums.controls; track $index; let i = $index) {
            <div class="phone-input-group flex items-center gap-2 mb-2">
                <input type="hidden" [formControl]="getPhoneIDControl(i)" />
                <input type="text" pInputText [formControl]="getPhoneNumberControl(i)"
                    class="phone-input p-inputtext-sm"
                    [class.p-invalid]="getPhoneNumberControl(i).invalid && getPhoneNumberControl(i).touched" />
                <button pButton type="button" icon="pi pi-times" class="p-button-rounded p-button-danger p-button-sm"
                    (click)="removePhone(i)" [disabled]="phoneNums.length <= 1" aria-label="Eliminar telÃ©fono">
                </button>
            </div>
            }

            <button pButton type="button" icon="pi pi-plus" iconPos="left" class="p-button-agregar" (click)="addPhone()"
                aria-label="Add new phone">
                Add new phone
            </button>
        </div>

        <button pButton type="submit" class="p-button-guardar">
            {{ mode === 'edit' ? 'Save changes' : 'Add user' }}
        </button>
    </div>
    }
</form>
}